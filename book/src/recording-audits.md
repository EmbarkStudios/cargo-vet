# Recording Audits

Audits performed by you or your teammates are recorded in your project's
`audits.toml`. Note that your dependencies may have their own `audits.toml`
files, but these have no effect on your project unless you explicitly import
them in `config.toml`.

## `audits.toml`

Listing a crate in `audits.toml` means that the you've inspected it and
determined that it meets your criteria. Usually these will be the [default
criteria](defining-criteria.md), but you can also specify that a given audit was
performed against other criteria.

For each crate in the audit list, the owner supplies a list of one or more
absolute or relative versions. Specifying a `version` means that the owner has
audited that version in its entirety. Specifying a `delta` means that the owner
has audited the diff between the two versions, and determined that the changes
preserve the relevant properties. Deltas can go both forward and backward in the
version sequence.

If, in the course of your auditing, you find a crate that does _not_ meet the
criteria, you can note this as well with `violation`. In these scenarios `cargo
vet` will reject the dependency even if it's listed in the `unaudited` table.

A sample `audits.toml` looks like this:
```
[criteria]

...

[[audits.bar]]
version = "1.2.3"
who = "Alice"

[[audits.bar]]
delta = "1.2.3 -> 1.2.4"
who = "Bob"

[[audits.bar]]
version = "2.1.3"
who = "Alice"

[[audits.bar]]
delta = "2.1.3 -> 2.1.1"
who = "Alice"

[[audits.baz]]
version = "0.2"
who = "Alice"
criteria = "safe_to_run_locally"

[[audits.foo]]
version = "0.2.1 -> 0.3.1"
who = "Bob"

[[audits.malicious_crate]]
violation = "*"

[[audits.partially_vulnerable_crate]]
violation = "<1.3"
who = "Bob"
```

Exactly one of `version`, `delta`, or `violation` must be specified.  The `who`
field is optional, but generated by default by `cargo vet certify` (using the
global git config) for two reasons:
* It makes it easier to attribute audits at a glance, particularly for
  remotely-hosted audit files.
* It emphasizes to the author that they are signing off on having performed the
  audit.

The expectation is that this file should never be pruned unless a
previously-recorded audit is determined to have violated the audit criteria.
Even if the owner no longer uses the specified crates, the audit records can
still prove useful to others in the ecosystem.

## The `unaudited` table in `config.toml`

This table enumerates the dependencies that have not been audited, but which the
project is nonetheless using. The structure is generally the same as the
`audits` table, with a [few differences](config.md#the-unaudited-table).
