# Recording Audits

Audits performed by you or your teammates are recorded in `audited.toml`.

## `audited.toml`

Listing a crate here means that the you've inspected it and
determined it to be suitable for inclusion. The standard for suitability,
and consequently the procedure for inspection, are ultimately up to you
to determine. It is recommended that both be documented in a `Policy.md`
file alongside `audited.toml` so that other individuals and organizations
can understand the degree of rigor that was applied during the recorded
audits.

For each crate in the audit list, the owner supplies a list of one or
more absolute or relative versions. Specifying an absolute version means
that the owner has audited that version in its entirety. Specifying a
relative version means that the owner has audited the diff between the two versions,
and determined the right-hand-side version to be suitable if the
left-hand-side is assumed to be suitable. Relative to the left-hand-side,
the right-hand-side can be either a subsequent or previous version.
Lexographic ordering is enforced.

If, in the course of your auditing, you find a crate that is _not_ safe, you
can note this as well with the "!" modifier. In these scenarios `cargo vet`
will reject the dependency even if it's listed in `unaudited.toml`.

A sample `audited.toml` looks like this:
```
bar = [
  "1.2.3", # Bobby Holley
  "1.2.3 -> 1.2.4", # Till Schneidereit
  "2.1.3", # Alex Crichton
  "2.1.3 -> 2.1.1", # Alex Crichton
]

foo = [
  "0.2.1 -> 0.3.1", # Till Schneidereit
]

malicious_crate = [
  "!*" # Bobby Holley
]

partially_vulnerable_crate = [
  "1.3", # Till Schneidereit
  "!1.2*" # Till Schneidereit
]
```

The attribution comments are optional, but generated by default by `cargo vet certify`
(using the global git config) for two reasons:
* It makes it easier to attribute audits at a glance, particularly for remotely-hosted
audit files.
* It emphasizes to the author that they are signing off on having performed the audit.

The expectation is that this file should never be pruned unless a previously-recorded
audit is determined to have violated the audit policy or a more
restrictive policy is adopted. Even if the owner no longer uses the specified
crates, the audit records can still prove useful to others in the ecosystem.

## `unaudited.toml`

This file enumerates the dependencies that have not been audited, but which
the project is nonetheless using. The format is generally the same as
`audited.toml`, aside from a few specific differences:

* **Relative versions** (e.g. "1.2->1.2.1") are not supported.

* **Forbidden versions** (e.g. "!1.2") are not supported.

* **Star-matched versions** (e.g. "1.*") are supported. This is useful
  for managing [unused dependencies](./platform-specific.md).
